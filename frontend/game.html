<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√≤ Ch∆°i - VI·ªÜT S·ª¨ K√ù</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/game.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <a href="/" class="logo">
                <span class="logo-icon">‚è≥</span>
                <span>VI·ªÜT S·ª¨ K√ù</span>
            </a>
            <ul class="nav-menu">
                <li><a href="/" class="nav-link">Trang ch·ªß</a></li>
                <li><a href="chatbot.html" class="nav-link">Chatbot</a></li>
                <li><a href="timeline.html" class="nav-link">D√≤ng th·ªùi gian</a></li>
                <li><a href="map.html" class="nav-link">B·∫£n ƒë·ªì</a></li>
                <li><a href="game.html" class="nav-link active">Tr√≤ ch∆°i</a></li>
                <li><a href="journey.html" class="nav-link">H√†nh tr√¨nh c·ªßa t√¥i</a></li>
                <li class="auth-login-btn"><a href="login.html" class="nav-link btn-gold" style="padding: 0.5rem 1.5rem;">ƒêƒÉng nh·∫≠p</a></li>
                <li class="auth-register-btn"><a href="register.html" class="nav-link" style="padding: 0.5rem 1.5rem;">ƒêƒÉng k√Ω</a></li>
                <li class="auth-user-info" style="display: none;">
                    <span class="nav-link" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem;">
                        <span class="auth-user-avatar">üë§</span>
                        <span class="auth-user-name">User</span>
                    </span>
                </li>
                <li class="auth-logout-btn" style="display: none;"><a href="#" class="nav-link btn-gold" style="padding: 0.5rem 1.5rem;">ƒêƒÉng xu·∫•t</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Container -->
    <div class="game-container">
        <!-- Game Menu (Default View) -->
        <div id="gameMenu">
            <h1 class="section-title">Tr√≤ Ch∆°i & Th·ª≠ Th√°ch</h1>
            <p style="text-align: center; color: var(--text-gray); margin: 0 auto 2rem auto; width: 100%; display: block;">
                Kh√°m ph√° l·ªãch s·ª≠ qua c√°c tr√≤ ch∆°i th√∫ v·ªã v√† th·ª≠ th√°ch h√†ng ng√†y!
            </p>

            <!-- Learning Streak Section -->
            <div id="streakSection" class="streak-section">
                <div class="streak-header">
                    <div class="streak-main">
                        <div class="streak-flame">üî•</div>
                        <div class="streak-info">
                            <div class="streak-count" id="streakCount">0</div>
                            <div class="streak-label">ng√†y li√™n t·ª•c</div>
                        </div>
                    </div>
                    <div class="streak-record">
                        <div class="record-value" id="longestStreak">0</div>
                        <div class="record-label">üèÜ K·ª∑ l·ª•c</div>
                    </div>
                </div>

                <!-- 7-Day Calendar -->
                <div class="streak-calendar" id="streakCalendar">
                    <!-- Will be populated by JavaScript -->
                </div>

                <!-- Milestones -->
                <div class="streak-milestones">
                    <div class="milestone-card" data-days="7">
                        <div class="milestone-icon">ü•â</div>
                        <div class="milestone-info">
                            <div class="milestone-title">Ng∆∞·ªùi h·ªçc chƒÉm ch·ªâ</div>
                            <div class="milestone-days">7 ng√†y</div>
                        </div>
                        <div class="milestone-reward">+50 XP</div>
                        <div class="milestone-status" id="milestone7">üîí</div>
                    </div>
                    <div class="milestone-card" data-days="14">
                        <div class="milestone-icon">ü•à</div>
                        <div class="milestone-info">
                            <div class="milestone-title">Nh√† s·ª≠ h·ªçc nh√≠</div>
                            <div class="milestone-days">14 ng√†y</div>
                        </div>
                        <div class="milestone-reward">+100 XP</div>
                        <div class="milestone-status" id="milestone14">üîí</div>
                    </div>
                    <div class="milestone-card" data-days="30">
                        <div class="milestone-icon">ü•á</div>
                        <div class="milestone-info">
                            <div class="milestone-title">B·∫≠c th·∫ßy l·ªãch s·ª≠</div>
                            <div class="milestone-days">30 ng√†y</div>
                        </div>
                        <div class="milestone-reward">+200 XP</div>
                        <div class="milestone-status" id="milestone30">üîí</div>
                    </div>
                </div>

                <!-- Streak Tips -->
                <div class="streak-tips">
                    <div class="tip-item">
                        <span class="tip-icon">üí°</span>
                        <span class="tip-text">Ho√†n th√†nh 1 quiz ho·∫∑c nhi·ªám v·ª• m·ªói ng√†y ƒë·ªÉ gi·ªØ streak!</span>
                    </div>
                    <div class="tip-item">
                        <span class="tip-icon">üíé</span>
                        <span class="tip-text">D√πng 50 XP ƒë·ªÉ "ƒë√≥ng bƒÉng" streak n·∫øu b·ªè 1 ng√†y (Coming soon)</span>
                    </div>
                </div>
            </div>

            <!-- Game Cards Grid -->
            <div class="game-grid">
                <!-- Mini Quiz -->
                <div class="game-card" data-game="quiz">
                    <div class="game-icon">‚ùì</div>
                    <h3 class="game-title">Mini Quiz</h3>
                    <p class="game-description">Ki·ªÉm tra ki·∫øn th·ª©c l·ªãch s·ª≠ c·ªßa b·∫°n v·ªõi 10 c√¢u h·ªèi th√∫ v·ªã. Tr·∫£ l·ªùi ƒë√∫ng ƒë·ªÉ nh·∫≠n ƒëi·ªÉm v√† XP!</p>
                    <button class="btn-quiz btn-primary" onclick="startQuiz()">
                        B·∫Øt ƒë·∫ßu ngay
                    </button>
                </div>

                <!-- Quiz Battle -->
                <div class="game-card" data-game="battle" style="border: 2px solid rgba(212, 175, 55, 0.5); background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(255, 165, 0, 0.05));">
                    <div class="game-icon">‚öîÔ∏è</div>
                    <h3 class="game-title" style="color: var(--gold);">ƒê·∫•u Tr√≠ L·ªãch S·ª≠</h3>
                    <p class="game-description">ƒê·∫•u tr∆∞·ªùng quiz battle! S·ª≠ d·ª•ng th·∫ª b√†i chi·∫øn thu·∫≠t, ƒë√°nh b·∫°i AI v√† tr·ªü th√†nh b·∫≠c th·∫ßy l·ªãch s·ª≠!</p>
                    <button class="btn-quiz btn-primary" onclick="window.location.href='quiz-battle.html'">
                        V√†o ƒë·∫•u tr∆∞·ªùng ‚Üí
                    </button>
                </div>

                <!-- Daily Missions -->
                <div class="game-card">
                    <div class="game-icon">üéØ</div>
                    <h3 class="game-title">Nhi·ªám V·ª• H√†ng Ng√†y</h3>
                    <p class="game-description">Ho√†n th√†nh nhi·ªám v·ª• ƒë·ªÉ nh·∫≠n XP v√† huy hi·ªáu ƒë·∫∑c bi·ªát!</p>
                    <button class="btn-quiz btn-primary" onclick="document.getElementById('missionsSection').scrollIntoView({behavior: 'smooth'})">
                        Xem nhi·ªám v·ª•
                    </button>
                </div>

                <!-- Leaderboard -->
                <div class="game-card">
                    <div class="game-icon">üèÜ</div>
                    <h3 class="game-title">B·∫£ng X·∫øp H·∫°ng</h3>
                    <p class="game-description">C·∫°nh tranh v·ªõi ng∆∞·ªùi ch∆°i kh√°c ƒë·ªÉ l√™n top v√† tr·ªü th√†nh b·∫≠c th·∫ßy l·ªãch s·ª≠!</p>
                    <button class="btn-quiz btn-primary" onclick="document.getElementById('leaderboardSection').scrollIntoView({behavior: 'smooth'})">
                        Xem b·∫£ng x·∫øp h·∫°ng
                    </button>
                </div>
            </div>

            <!-- Daily Missions Section -->
            <div id="missionsSection" style="margin-top: 4rem;">
                <h2 class="section-title"> Nhi·ªám V·ª• H√†ng Ng√†y</h2>
                <p style="text-align: center; color: var(--text-gray); margin: 0 auto 2rem auto; max-width: 800px; font-size: 1.1rem; line-height: 1.6;">
                    Ho√†n th√†nh nhi·ªám v·ª• ƒë·ªÉ nh·∫≠n th∆∞·ªüng XP m·ªói ng√†y!
                </p>
                <div id="missionsContainer" class="missions-container">
                    <!-- Missions will be loaded here by JavaScript -->
                </div>
            </div>

            <!-- Leaderboard Section -->
            <div id="leaderboardSection" style="margin-top: 4rem;">
                <h2 class="section-title">üèÜ B·∫£ng X·∫øp H·∫°ng</h2>
                <p style="text-align: center; color: var(--text-gray); margin: 0 auto 2rem auto; max-width: 800px; font-size: 1.1rem; line-height: 1.6;">
                    Top ng∆∞·ªùi ch∆°i xu·∫•t s·∫Øc nh·∫•t!
                </p>
                <div class="leaderboard-container">
                    <div id="leaderboardList" class="leaderboard-list">
                        <!-- Leaderboard will be loaded here by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Quiz Container (Hidden by default) -->
        <div id="quizContainer" style="display: none;">
            <!-- Topic Selection Screen -->
            <div id="topicSelection" style="display: block;">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <h1 class="section-title">Ch·ªçn Ch·ªß ƒê·ªÅ Quiz</h1>
                    <p style="color: var(--text-gray); margin-bottom: 2rem;">
                        Ch·ªçn m·ªôt ch·ªß ƒë·ªÅ ƒë·ªÉ b·∫Øt ƒë·∫ßu quiz 10 c√¢u h·ªèi
                    </p>
                    <button class="btn-quiz btn-secondary" id="backToMenuFromTopic" style="margin-top: 1rem;">
                        ‚Üê Quay l·∫°i menu
                    </button>
                </div>

                <!-- Topic Grid -->
                <div id="topicGrid">
                    <!-- Topics will be loaded here by JavaScript -->
                </div>
            </div>

            <!-- Quiz Playing Screen -->
            <div id="quizPlayScreen" style="display: none;">
                <!-- Quiz Header -->
                <div style="text-align: center; margin-bottom: 2rem;">
                    <h1 class="section-title">Mini Quiz L·ªãch S·ª≠</h1>
                    <div id="currentTopicDisplay" style="margin-top: 1rem; color: var(--gold); font-size: 1.2rem;"></div>
                    <button class="btn-quiz btn-secondary" id="backToTopics" style="margin-top: 1rem;">
                        ‚Üê Ch·ªçn l·∫°i ch·ªß ƒë·ªÅ
                    </button>
                </div>

            <!-- Quiz Section -->
            <div id="quizSection" class="quiz-section active">
                <div class="quiz-header">
                    <div class="quiz-progress">
                        <span style="color: var(--text-gray);">Ti·∫øn ƒë·ªô:</span>
                        <div class="progress-bar">
                            <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                        </div>
                        <span id="questionNumber" style="color: var(--gold); font-weight: 700;">1/10</span>
                    </div>

                    <div class="quiz-stats">
                        <div class="stat-item">
                            <div id="correctAnswers" class="stat-value">0</div>
                            <div class="stat-label">‚úÖ ƒê√∫ng</div>
                        </div>
                        <div class="stat-item">
                            <div id="wrongAnswers" class="stat-value">0</div>
                            <div class="stat-label">‚ùå Sai</div>
                        </div>
                        <div class="stat-item">
                            <div id="currentScore" class="stat-value">0</div>
                            <div class="stat-label">‚≠ê ƒêi·ªÉm</div>
                        </div>
                    </div>
                </div>

                <!-- Question Card -->
                <div class="question-card">
                    <div id="questionDifficulty" class="question-difficulty difficulty-medium">Trung b√¨nh</div>
                    <div id="questionNumber2" class="question-number">C√¢u h·ªèi 1/10</div>
                    <div id="questionText" class="question-text">
                        ƒêang t·∫£i c√¢u h·ªèi...
                    </div>

                    <!-- Options -->
                    <div id="optionsContainer" class="options-grid">
                        <!-- Options will be loaded here by JavaScript -->
                    </div>

                    <!-- Explanation Box -->
                    <div id="explanationBox" class="explanation-box">
                        <div id="explanationTitle" class="explanation-title">üí° Gi·∫£i th√≠ch</div>
                        <div id="explanationText" class="explanation-text"></div>
                    </div>
                </div>

                <!-- Quiz Controls -->
                <div class="quiz-controls">
                    <button class="btn-quiz btn-secondary" onclick="handleExitQuiz()">
                        Tho√°t
                    </button>
                    <button id="nextBtn" class="btn-quiz btn-primary" onclick="nextQuestion()" disabled>
                        C√¢u ti·∫øp theo ‚Üí
                    </button>
                    <button id="submitBtn" class="btn-quiz btn-primary" onclick="submitQuiz()" disabled style="display: none;">
                        N·ªôp b√†i ‚úì
                    </button>
                </div>
            </div>
            </div>
            <!-- End Quiz Playing Screen -->

            <!-- Results Screen (Hidden by default) -->
            <div id="resultsScreen" class="quiz-section" style="display: none;">
                <div class="results-screen">
                    <h2 style="color: var(--gold); font-size: 2.5rem; margin-bottom: 1rem;">
                        K·∫øt Qu·∫£
                    </h2>

                    <div id="resultsScore" class="results-score">0%</div>
                    <div id="resultsMessage" class="results-message">
                        Tuy·ªát v·ªùi!
                    </div>

                    <div class="xp-earned">
                        <span id="xpEarned">+0 XP</span>
                    </div>

                    <div class="results-details">
                        <div class="result-stat">
                            <div id="correctCount" class="result-stat-value">0</div>
                            <div class="result-stat-label">C√¢u ƒë√∫ng</div>
                        </div>
                        <div class="result-stat">
                            <div id="wrongCount" class="result-stat-value">0</div>
                            <div class="result-stat-label">C√¢u sai</div>
                        </div>
                        <div class="result-stat">
                            <div id="totalScore" class="result-stat-value">0</div>
                            <div class="result-stat-label">T·ªïng ƒëi·ªÉm</div>
                        </div>
                        <div class="result-stat">
                            <div id="timeSpent" class="result-stat-value">0s</div>
                            <div class="result-stat-label">Th·ªùi gian</div>
                        </div>
                    </div>

                    <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem;">
                        <button class="btn-quiz btn-primary" onclick="restartQuiz()">
                            L√†m l·∫°i
                        </button>
                        <button class="btn-quiz btn-secondary" onclick="showGameMenu()">
                            V·ªÅ menu
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/main.js"></script>
    <script src="js/game.js"></script>

    <style>
        /* Animation keyframes */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
    </style>
    <!-- Background Music Controller -->
    <script src="js/background-music.js"></script>
</body>
</html>
