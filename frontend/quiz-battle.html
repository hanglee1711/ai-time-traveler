<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒê·∫•u Tr√≠ L·ªãch S·ª≠ - VI·ªÜT S·ª¨ K√ù</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/quiz-battle.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <a href="index.html" class="logo">
                <span class="logo-icon">‚è≥</span>
                <span>VI·ªÜT S·ª¨ K√ù</span>
            </a>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Trang ch·ªß</a></li>
                <li><a href="chatbot.html" class="nav-link">Chatbot</a></li>
                <li><a href="timeline.html" class="nav-link">D√≤ng th·ªùi gian</a></li>
                <li><a href="map.html" class="nav-link">B·∫£n ƒë·ªì</a></li>
                <li><a href="game.html" class="nav-link active">Tr√≤ ch∆°i</a></li>
                <li><a href="journey.html" class="nav-link">H√†nh tr√¨nh c·ªßa t√¥i</a></li>
                <li class="auth-login-btn"><a href="login.html" class="nav-link btn-gold" style="padding: 0.5rem 1.5rem;">ƒêƒÉng nh·∫≠p</a></li>
                <li class="auth-register-btn"><a href="register.html" class="nav-link" style="padding: 0.5rem 1.5rem;">ƒêƒÉng k√Ω</a></li>
                <li class="auth-user-info" style="display: none;">
                    <span class="nav-link" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem;">
                        <span class="auth-user-avatar">üë§</span>
                        <span class="auth-user-name">User</span>
                    </span>
                </li>
                <li class="auth-logout-btn" style="display: none;"><a href="#" class="nav-link btn-gold" style="padding: 0.5rem 1.5rem;">ƒêƒÉng xu·∫•t</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Container -->
    <div class="battle-container">
        <!-- Sound Control -->
        <div class="sound-control">
            <button id="muteBtn" class="sound-btn" title="Toggle Mute">
                üîä
            </button>
            <div class="volume-slider" id="volumeSlider" style="display: none;">
                <label>Volume: <span id="volumeValue">70%</span></label>
                <input type="range" id="masterVolume" min="0" max="100" value="70">
            </div>
        </div>

        <!-- Start Screen -->
        <div id="startScreen" class="start-screen">
            <div class="start-content">
                <h1 class="game-title">
                    <span class="title-icon">‚öîÔ∏è</span>
                    ƒê·∫§U TR√ç L·ªäCH S·ª¨
                </h1>
                <p class="game-subtitle">Th·ª≠ th√°ch ki·∫øn th·ª©c trong ƒë·∫•u tr∆∞·ªùng quiz battle!</p>

                <div class="difficulty-selection">
                    <h3>Ch·ªçn ƒë·ªô kh√≥:</h3>
                    <div class="difficulty-cards">
                        <div class="difficulty-card" data-difficulty="easy">
                            <div class="difficulty-icon">üòä</div>
                            <div class="difficulty-name">D·ªÖ</div>
                            <div class="difficulty-desc">
                                AI 50% accuracy<br>
                                Ph√π h·ª£p ng∆∞·ªùi m·ªõi
                            </div>
                        </div>
                        <div class="difficulty-card" data-difficulty="medium">
                            <div class="difficulty-icon">üòé</div>
                            <div class="difficulty-name">Trung B√¨nh</div>
                            <div class="difficulty-desc">
                                AI 70% accuracy<br>
                                Th·ª≠ th√°ch c√¢n b·∫±ng
                            </div>
                        </div>
                        <div class="difficulty-card" data-difficulty="hard">
                            <div class="difficulty-icon">üî•</div>
                            <div class="difficulty-name">Kh√≥</div>
                            <div class="difficulty-desc">
                                AI 85% accuracy<br>
                                Cho b·∫≠c th·∫ßy
                            </div>
                        </div>
                    </div>
                </div>

                <button id="startBattleBtn" class="btn-battle btn-primary" disabled>
                    B·∫Øt ƒë·∫ßu tr·∫≠n ƒë·∫•u
                </button>

                <div class="game-rules">
                    <h4>üìú Lu·∫≠t ch∆°i:</h4>
                    <ul>
                        <li>Tr·∫£ l·ªùi 10 c√¢u h·ªèi l·ªãch s·ª≠, c·∫°nh tranh v·ªõi AI</li>
                        <li>M·ªói c√¢u ƒë√∫ng: +10 ƒëi·ªÉm (d·ªÖ), +20 ƒëi·ªÉm (trung b√¨nh), +30 ƒëi·ªÉm (kh√≥)</li>
                        <li>Tr·∫£ l·ªùi nhanh ƒë·ªÉ ƒë∆∞·ª£c ƒëi·ªÉm th∆∞·ªüng th√™m</li>
                        <li>S·ª≠ d·ª•ng th·∫ª b√†i ƒë·ªÉ h·ªó tr·ª£ ho·∫∑c t·∫•n c√¥ng ƒë·ªëi th·ªß</li>
                        <li>M·ªói l∆∞·ª£t +1 nƒÉng l∆∞·ª£ng (max 3) ƒë·ªÉ d√πng th·∫ª</li>
                        <li>Khi ƒë·ªëi th·ªß tr·∫£ l·ªùi sai, th·∫ª t·∫•n c√¥ng g√¢y s√°t th∆∞∆°ng</li>
                        <li>Chi·∫øn th·∫Øng khi h·∫° g·ª•c ƒë·ªëi th·ªß ho·∫∑c ƒëi·ªÉm cao h∆°n sau 10 v√≤ng</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Battle Arena -->
        <div id="battleArena" class="battle-arena" style="display: none;">
            <!-- Opponent Area (Top) -->
            <div class="player-area opponent-area">
                <div class="player-info">
                    <div class="player-avatar opponent-avatar">ü§ñ</div>
                    <div class="player-details">
                        <div class="player-name">AI ƒê·ªëi Th·ªß</div>
                        <div class="player-stats">
                            <div class="stat-bar">
                                <div class="stat-label">HP</div>
                                <div class="hp-bar">
                                    <div id="opponentHpFill" class="hp-fill" style="width: 100%">
                                        <span id="opponentHpText">100/100</span>
                                    </div>
                                </div>
                            </div>
                            <div class="stat-row">
                                <div class="stat-item">
                                    <span class="stat-icon">‚ö°</span>
                                    <span id="opponentEnergy">0</span>/3
                                </div>
                                <div class="stat-item">
                                    <span class="stat-icon">üõ°Ô∏è</span>
                                    <span id="opponentShield">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-icon">‚≠ê</span>
                                    <span id="opponentScore">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="opponent-hand">
                    <div class="card-back">?</div>
                    <div class="card-back">?</div>
                    <div class="card-back">?</div>
                </div>
            </div>

            <!-- Battle Field (Center) -->
            <div class="battle-field">
                <!-- Turn Indicator -->
                <div class="turn-indicator">
                    <div class="turn-number">Turn <span id="turnNumber">1</span>/10</div>
                </div>

                <!-- Question Card -->
                <div class="question-battle-card">
                    <div class="question-header">
                        <span id="questionCategory" class="question-category">üìú Tri·ªÅu ƒê·∫°i</span>
                        <span id="questionDifficulty" class="question-difficulty">Trung b√¨nh</span>
                    </div>

                    <div id="questionText" class="question-text">
                        ƒêang t·∫£i c√¢u h·ªèi...
                    </div>

                    <div class="timer-container">
                        <div class="timer-label">Th·ªùi gian:</div>
                        <div class="timer-bar">
                            <div id="timerFill" class="timer-fill" style="width: 100%"></div>
                        </div>
                        <div id="timerText" class="timer-text">30s</div>
                    </div>

                    <!-- Answer Options -->
                    <div id="answersContainer" class="answers-grid">
                        <!-- Answers will be loaded by JS -->
                    </div>

                    <!-- Explanation Box -->
                    <div id="explanationBox" class="explanation-box" style="display: none;">
                        <div class="explanation-title">üí° Gi·∫£i th√≠ch</div>
                        <div id="explanationText" class="explanation-text"></div>
                    </div>

                    <!-- Action Button -->
                    <div class="question-actions">
                        <button id="nextTurnBtn" class="btn-battle btn-primary" style="display: none;">
                            L∆∞·ª£t ti·∫øp theo ‚Üí
                        </button>
                    </div>
                </div>

                <!-- Effects Display -->
                <div id="effectsDisplay" class="effects-display" style="display: none;">
                    <!-- Effects messages will appear here -->
                </div>
            </div>

            <!-- Player Area (Bottom) -->
            <div class="player-area player-area-self">
                <div class="player-hand" id="playerHand">
                    <!-- Cards will be loaded by JS -->
                </div>

                <div class="player-info">
                    <div class="player-avatar player-avatar-self">üë§</div>
                    <div class="player-details">
                        <div class="player-name">B·∫°n</div>
                        <div class="player-stats">
                            <div class="stat-bar">
                                <div class="stat-label">HP</div>
                                <div class="hp-bar">
                                    <div id="playerHpFill" class="hp-fill player-hp" style="width: 100%">
                                        <span id="playerHpText">100/100</span>
                                    </div>
                                </div>
                            </div>
                            <div class="stat-row">
                                <div class="stat-item">
                                    <span class="stat-icon">‚ö°</span>
                                    <span id="playerEnergy">0</span>/3
                                </div>
                                <div class="stat-item">
                                    <span class="stat-icon">üõ°Ô∏è</span>
                                    <span id="playerShield">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-icon">‚≠ê</span>
                                    <span id="playerScore">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="gameOverScreen" class="game-over-screen" style="display: none;">
            <div class="game-over-content">
                <div id="victoryStatus" class="victory-status">
                    <div class="victory-icon">üèÜ</div>
                    <div class="victory-text">Chi·∫øn Th·∫Øng!</div>
                </div>

                <div class="final-stats">
                    <div class="final-stat-card player-final">
                        <h3>üë§ B·∫°n</h3>
                        <div class="final-stat-grid">
                            <div class="final-stat-item">
                                <div class="final-stat-value" id="finalPlayerScore">0</div>
                                <div class="final-stat-label">ƒêi·ªÉm</div>
                            </div>
                            <div class="final-stat-item">
                                <div class="final-stat-value" id="finalPlayerHP">0</div>
                                <div class="final-stat-label">HP c√≤n l·∫°i</div>
                            </div>
                            <div class="final-stat-item">
                                <div class="final-stat-value" id="finalPlayerCorrect">0</div>
                                <div class="final-stat-label">C√¢u ƒë√∫ng</div>
                            </div>
                            <div class="final-stat-item">
                                <div class="final-stat-value" id="finalPlayerAccuracy">0%</div>
                                <div class="final-stat-label">ƒê·ªô ch√≠nh x√°c</div>
                            </div>
                        </div>
                    </div>

                    <div class="final-stat-card opponent-final">
                        <h3>ü§ñ AI ƒê·ªëi Th·ªß</h3>
                        <div class="final-stat-grid">
                            <div class="final-stat-item">
                                <div class="final-stat-value" id="finalOpponentScore">0</div>
                                <div class="final-stat-label">ƒêi·ªÉm</div>
                            </div>
                            <div class="final-stat-item">
                                <div class="final-stat-value" id="finalOpponentHP">0</div>
                                <div class="final-stat-label">HP c√≤n l·∫°i</div>
                            </div>
                            <div class="final-stat-item">
                                <div class="final-stat-value" id="finalOpponentCorrect">0</div>
                                <div class="final-stat-label">C√¢u ƒë√∫ng</div>
                            </div>
                            <div class="final-stat-item">
                                <div class="final-stat-value">AI</div>
                                <div class="final-stat-label">ƒê·ªëi th·ªß</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="xp-reward">
                    <div class="xp-icon">‚ú®</div>
                    <div class="xp-text">
                        <div class="xp-amount">+<span id="xpEarned">0</span> XP</div>
                        <div class="xp-label">Kinh nghi·ªám nh·∫≠n ƒë∆∞·ª£c</div>
                    </div>
                </div>

                <div class="game-over-actions">
                    <button id="playAgainBtn" class="btn-battle btn-primary">
                        üîÑ Ch∆°i l·∫°i
                    </button>
                    <button id="backToMenuBtn" class="btn-battle btn-secondary">
                        üìã V·ªÅ menu game
                    </button>
                </div>
            </div>
        </div>

        <!-- Card Detail Modal -->
        <div id="cardModal" class="card-modal" style="display: none;">
            <div class="card-modal-overlay"></div>
            <div class="card-modal-content">
                <button class="card-modal-close">√ó</button>
                <div id="cardDetail">
                    <!-- Card details will be loaded here -->
                </div>
                <button id="useCardBtn" class="btn-battle btn-primary">
                    S·ª≠ d·ª•ng th·∫ª
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/animation_engine.js"></script>
    <script src="js/sound_manager.js"></script>
    <script src="js/smart_ai.js"></script>
    <script src="js/quiz_battle_engine.js"></script>
    <script src="js/quiz-battle.js"></script>
    <script src="js/main.js"></script>

    <style>
        @keyframes slideInRight {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(400px); opacity: 0; }
        }
    </style>
</body>
</html>
